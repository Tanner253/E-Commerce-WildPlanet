@page
@model MyShop.Pages.Profile.ProfileModel
@using Microsoft.AspNetCore.Identity
@using MyShop.Models

@inject SignInManager<ApplicationUser> SignInManager


@{
    ViewData["Title"] = "Profile";
    Layout = "_Layout";
}

<h1>Profile</h1>
<div>
    @if (SignInManager.IsSignedIn(User))
    {
        <span>Welcome @User.Claims.First(c => c.Type == "FullName").Value!</span>
        @await Component.InvokeAsync("BasketComponent");
        <span>Your Email is: @User.Identity.Name</span>
        <span>Your Name is: @Model.getName(User.Identity.Name)</span>
        <form>

            @*<label asp-for="@Model.getName(User.Identity.Name)"></label>
            <input asp-for="@Model.getName(User.Identity.Name)" />
            <span asp-validation-for="@Model.getName(User.Identity.Name)" class="text-danger"></span>*@
            @*<button type="submit" value="Register"> User</button>*@
        </form>
    }
    @if (!SignInManager.IsSignedIn(User))
    {
        <span>Welcome anonymous! <a href="/Account/Register">Click here to sign in!</a></span>
    }
</div>